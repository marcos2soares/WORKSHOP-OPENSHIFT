---
apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  labels:
    app: appvt121170
  name: appvt121170v1
  namespace: vt121170prj
spec:
  failedBuildsHistoryLimit: 5
  successfulBuildsHistoryLimit: 5
  nodeSelector: null
  output:
    to:
      kind: ImageStreamTag
      name: appvt121170:1.0
  postCommit: {}
  resources: {}
  runPolicy: Serial
  source:
    binary: {}
    type: Binary
  strategy:
    dockerStrategy: {}
    type: Docker
---
apiVersion: apps/v1
kind: Deployment
metadata:
 labels:
   app: appvt121170
   app.kubernetes.io/part-of: appvt121170
 name: appvt121170-deploy
spec:
 replicas: 1
 selector:
   matchLabels:
     app: appvt121170
 template:
   metadata:
     labels:
       app: appvt121170
   spec:
     containers:
       - image: image-registry.openshift-image-registry.svc:5000/vt121170prj/appvt121170:1.0
         imagePullPolicy: Always
         name: appvt121170-cont
         ports:
           - containerPort: 6000
         resources:
          limits:
            cpu: 500m
            memory: 1000Mi
          requests:
            cpu: 200m
            memory: 200Mi

---
apiVersion: image.openshift.io/v1
kind: ImageStream
metadata:
  labels:
    app: appvt121170
  name: appvt121170
  namespace: vt121170prj
spec:
  lookupPolicy:
    local: false
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  annotations:
    haproxy.router.openshift.io/balance: 'random'
    haproxy.router.openshift.io/disable_cookies: 'true'
  labels:
    app: appvt121170
  name: appvt121170-route-2
  namespace: vt121170prj
spec:
  host: appvt121170-prod-2.apps.ocplab.vtal.intra
  tls:
    insecureEdgeTerminationPolicy: Redirect
    termination: edge
  to:
    kind: Service
    name: appvt121170-svc
    weight: 100
  port:
    targetPort: appvt121170-svc-port
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  labels:
    app: appvt121170
  name: appvt121170-route
  namespace: vt121170prj
spec:
  host: appvt121170-prod.apps.ocplab.vtal.intra
  tls:
    insecureEdgeTerminationPolicy: Redirect
    termination: edge
  to:
    kind: Service
    name: appvt121170-svc
    weight: 100
  port:
    targetPort: appvt121170-svc-port
  wildcardPolicy: None
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: appvt121170
  name: appvt121170-svc
  namespace: vt121170prj
spec:
  ports:
  - name: appvt121170-svc-port
    port: 5000
    targetPort: 6000
  selector:
    app: appvt121170
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: appvt12117-hpa
  namespace: vt121170prj
  labels:
    app: appvt121170
spec:
  maxReplicas: 15
  metrics:
  - resource:
      name: cpu
      target:
        averageUtilization: 60
        type: Utilization
    type: Resource
  - resource:
      name: memory
      target:
        averageUtilization: 60
        type: Utilization
    type: Resource
  minReplicas: 1
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: appvt121170-deploy
